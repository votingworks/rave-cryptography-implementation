#!/bin/bash
#
# used as follows
# ./generate-all-eg-election-params.sh <vx-election-definition-file> <directory-where-everything-goes>
#

EG_HOME="/home/vx/code/electionguard-kotlin-multiplatform/egklib"

VX_ELECTION_DEFINITION=$1
OUTPUT_DIR=$2

mkdir -p ${OUTPUT_DIR}

node ./convert-vx-to-eg.js ${VX_ELECTION_DEFINITION} ${OUTPUT_DIR}/manifest.json

java -Djava.library.path=${EG_HOME}/build/classes/kotlin/jvm/main:/home/vx/electionguard-kotlin-multiplatform/egklib/build/processedResources/jvm/main \
			     -Dfile.encoding=UTF-8 -Dsun.stdout.encoding=UTF-8 -Dsun.stderr.encoding=UTF-8 \
			     -classpath \
			     ${EG_HOME}/build/classes/kotlin/jvm/main:${EG_HOME}/build/processedResources/jvm/main:/home/vx/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlinx/kotlinx-serialization-json-jvm/1.5.0/f2355f60f5c027da0326c8af2d9c724d39aa0ce9/kotlinx-serialization-json-jvm-1.5.0.jar:/home/vx/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlinx/kotlinx-serialization-core-jvm/1.5.0/d701e8cccd443a7cc1a0bcac53432f2745dcdbda/kotlinx-serialization-core-jvm-1.5.0.jar:/home/vx/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlinx/kotlinx-coroutines-core-jvm/1.6.4/2c997cd1c0ef33f3e751d3831929aeff1390cb30/kotlinx-coroutines-core-jvm-1.6.4.jar:/home/vx/.gradle/caches/modules-2/files-2.1/io.github.microutils/kotlin-logging-jvm/3.0.5/82f2256aeedccfd9c27ea585274a50bf06517383/kotlin-logging-jvm-3.0.5.jar:/home/vx/.gradle/caches/modules-2/files-2.1/com.michael-bull.kotlin-result/kotlin-result-jvm/1.1.18/b1445a18241012654163206a1c694b6982b2b439/kotlin-result-jvm-1.1.18.jar:/home/vx/.gradle/caches/modules-2/files-2.1/pro.streem.pbandk/pbandk-protos/0.14.2/aa86a003e5008aafb846fce2da01b4bedbb20b84/pbandk-protos-0.14.2.jar:/home/vx/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlin/kotlin-stdlib-jdk8/1.8.22/b25c86d47d6b962b9cf0f8c3f320c8a10eea3dd1/kotlin-stdlib-jdk8-1.8.22.jar:/home/vx/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlinx/kotlinx-datetime-jvm/0.4.0/2224732fcb9b6116fbeb0926dd108604e578356b/kotlinx-datetime-jvm-0.4.0.jar:/home/vx/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlinx/kotlinx-cli-jvm/0.3.5/22abc04cceb77fdd3def0113924b604df9e9c21/kotlinx-cli-jvm-0.3.5.jar:/home/vx/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlin/kotlin-stdlib-jdk7/1.8.22/4dabb8248310d833bb6a8b516024a91fd3d275c/kotlin-stdlib-jdk7-1.8.22.jar:/home/vx/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlin/kotlin-stdlib/1.8.22/636bf8b320e7627482771bbac9ed7246773c02bd/kotlin-stdlib-1.8.22.jar:/home/vx/.gradle/caches/modules-2/files-2.1/org.slf4j/slf4j-api/2.0.3/deef7fc81f00bd5e6205bb097be1040b4094f007/slf4j-api-2.0.3.jar:/home/vx/.gradle/caches/modules-2/files-2.1/org.jetbrains/annotations/13.0/919f0dfe192fb4e063e7dacadee7f8bb9a2672a9/annotations-13.0.jar:/home/vx/.gradle/caches/modules-2/files-2.1/pro.streem.pbandk/pbandk-runtime-jvm/0.14.2/b94f4a0a8942ac099ae9b4bffdb791fe95c7f8e/pbandk-runtime-jvm-0.14.2.jar\
			     electionguard.cli.RunCreateElectionConfig --electionManifest ${OUTPUT_DIR}/manifest.json --nguardians 1 --quorum 1 --outputDir ${OUTPUT_DIR} --createdBy "DJ McAdida" --device "Ben's Laptop"


java -Djava.library.path=${EG_HOME}/build/classes/kotlin/jvm/main:/home/vx/electionguard-kotlin-multiplatform/egklib/build/processedResources/jvm/main \
			     -Dfile.encoding=UTF-8 -Dsun.stdout.encoding=UTF-8 -Dsun.stderr.encoding=UTF-8 \
			     -classpath \
			     ${EG_HOME}/build/classes/kotlin/jvm/main:${EG_HOME}/build/processedResources/jvm/main:/home/vx/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlinx/kotlinx-serialization-json-jvm/1.5.0/f2355f60f5c027da0326c8af2d9c724d39aa0ce9/kotlinx-serialization-json-jvm-1.5.0.jar:/home/vx/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlinx/kotlinx-serialization-core-jvm/1.5.0/d701e8cccd443a7cc1a0bcac53432f2745dcdbda/kotlinx-serialization-core-jvm-1.5.0.jar:/home/vx/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlinx/kotlinx-coroutines-core-jvm/1.6.4/2c997cd1c0ef33f3e751d3831929aeff1390cb30/kotlinx-coroutines-core-jvm-1.6.4.jar:/home/vx/.gradle/caches/modules-2/files-2.1/io.github.microutils/kotlin-logging-jvm/3.0.5/82f2256aeedccfd9c27ea585274a50bf06517383/kotlin-logging-jvm-3.0.5.jar:/home/vx/.gradle/caches/modules-2/files-2.1/com.michael-bull.kotlin-result/kotlin-result-jvm/1.1.18/b1445a18241012654163206a1c694b6982b2b439/kotlin-result-jvm-1.1.18.jar:/home/vx/.gradle/caches/modules-2/files-2.1/pro.streem.pbandk/pbandk-protos/0.14.2/aa86a003e5008aafb846fce2da01b4bedbb20b84/pbandk-protos-0.14.2.jar:/home/vx/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlin/kotlin-stdlib-jdk8/1.8.22/b25c86d47d6b962b9cf0f8c3f320c8a10eea3dd1/kotlin-stdlib-jdk8-1.8.22.jar:/home/vx/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlinx/kotlinx-datetime-jvm/0.4.0/2224732fcb9b6116fbeb0926dd108604e578356b/kotlinx-datetime-jvm-0.4.0.jar:/home/vx/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlinx/kotlinx-cli-jvm/0.3.5/22abc04cceb77fdd3def0113924b604df9e9c21/kotlinx-cli-jvm-0.3.5.jar:/home/vx/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlin/kotlin-stdlib-jdk7/1.8.22/4dabb8248310d833bb6a8b516024a91fd3d275c/kotlin-stdlib-jdk7-1.8.22.jar:/home/vx/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlin/kotlin-stdlib/1.8.22/636bf8b320e7627482771bbac9ed7246773c02bd/kotlin-stdlib-1.8.22.jar:/home/vx/.gradle/caches/modules-2/files-2.1/org.slf4j/slf4j-api/2.0.3/deef7fc81f00bd5e6205bb097be1040b4094f007/slf4j-api-2.0.3.jar:/home/vx/.gradle/caches/modules-2/files-2.1/org.jetbrains/annotations/13.0/919f0dfe192fb4e063e7dacadee7f8bb9a2672a9/annotations-13.0.jar:/home/vx/.gradle/caches/modules-2/files-2.1/pro.streem.pbandk/pbandk-runtime-jvm/0.14.2/b94f4a0a8942ac099ae9b4bffdb791fe95c7f8e/pbandk-runtime-jvm-0.14.2.jar\
			     electionguard.keyceremony.RunTrustedKeyCeremonyKt --inputDir ${OUTPUT_DIR} --trusteeDir ${OUTPUT_DIR}/private --outputDir ${OUTPUT_DIR}
